# Introduction

This repo contains the template and the static files that power the login page for EPR. The login page is used by B2C as a page layout template, we define the overall structure such as the header and footer and also define a placeholder for where B2C will then inject the login textboxes and links to the forgotten password and create account flows.

# How it works.

The html template is located in src/Project/assets/templates and the associated css is in scss folder. 

The html is where you define the markup for the sign in page, this includes the header and the footer and the general markup for the placeholder sections. 

The scss file is where you define any custom css that will then get compiled into css.

There are separate folders for each environment that contains the static files generated by the gulpfile and using the templates alongside the css, fonts and images directly from the govuk-frontend package. The gulpfile generates the static files for each environment, replacing paths with the correct environment specific versions. These files are committed into source control.

There is then a pipeline https://dev.azure.com/defragovuk/RWD-CPR-EPR4P-ADO/_build?definitionId=5558 which when ran will take the corresponding environments static files from the environment folder and copy them across to the storage account. Further information on storage accounts can be found on the following confluence page https://eaflood.atlassian.net/wiki/spaces/MWR/pages/5835489286/ADR-034.4+-+B2C+SignUp-SignIn+Page.

Depending on the environment you choose when running the pipeline, only that corresponding environments folders content will be copied to the correct storage account that B2C reads from.

## Running locally

Due to the way the paths for the css stylesheets are replaced in the gulpfile, running locally means you need to have it pointed in the correct location, for example, if you take the tst folder, the html file will point to the css file that is in the tst storage account and if you want to test your changes locally first before pushing, you cant use this version as your changes wont be reflected without manually changing paths

To run the gulpfile locally to regenerate the static files for each environment, you need node installed, once installed you then need to run npm install in the src/Project folder where the packages.json file is located. 

You can then use Visual Studios task runner explorer tool which will find the gulpfile automatically (once you open the sln file) and you can then run the 'build-frontend' task which will regenerate everything. 

This will now also generate 'local' folder too which caters for opening the files locally with all the paths adpated for local running, this means either via running a local server using node, or simply opening the html file in a browser directly you can view your changes. This wont show the login boxes or flows but it gives you the oppurtunity to check any changes around that locally before pushing.

Note: the 'local' folders contents are not committed to source control, it is merely used as a helpful tool to check changes locally.

# Contributing to this project
Please read the [contribution guidelines](CONTRIBUTING.md) before submitting a pull request.

# Licence
[Licence information](LICENCE.md).